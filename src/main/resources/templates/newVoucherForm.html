<!DOCTYPE HTML>
<html xmlns:th="http://thymeleaf.org/">
<head>
    <meta charset="utf-8">
    <link href="../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
</head>
<body>
<div class="container">
    <div class="py-5 text-center">
        <h2>바우처 추가하기</h2>
    </div>

    <h4 class="mb-3">바우처 정보 입력</h4>
    <form name="submitForm" id="submitForm" action="voucher.html" th:action method="post" onsubmit="return validate()">
        <div>
            <label for="voucherType">Voucher Type</label>
            <select name="voucherType" id="voucherType">
                <option value="fixed">Fixed</option>
                <option value="percent">Percent</option>
            </select>
        </div>
        <div>
            <label for="discountAmount">Discount Amount</label>
            <input type="number" id="discountAmount" name="discountAmount" class="form-control" placeholder="Enter Discount Amount">
        </div>
        <hr class="my-4">
        <div class="row">
            <div class="col">
                <button class="w-100 btn btn-primary btn-lg" type="submit">바우처 등록</button>
            </div>
            <div class="col">
                <button class="w-100 btn btn-secondary btn-lg" onclick="location.href='items.html'" th:onclick="|location.href='@{/vouchers}'|" type="button">취소</button>
            </div>
        </div>
    </form>
</div><!-- /container -->
</body>
<script type="text/javascript">
    function validate() {
        const voucherType = document.getElementById("voucherType")
        const discountAmount = document.getElementById("discountAmount")

        if (voucherType.value === "percent") {
            if (discountAmount.value > 100) {
                alert("Percent discount cannot exceed 100.")
                discountAmount.value = 100
                return false
            }
            if (discountAmount.value < 0) {
                alert("Percent discount cannot be negative.")
                discountAmount.value = 0
                return false
            }
        }

        if (voucherType.value === "fixed") {
            if (discountAmount.value < 0) {
                alert("Fixed Amount Discount must be positive")
                discountAmount.value = 0
                return false
            }
        }
        return true
    }
</script>
</html>
